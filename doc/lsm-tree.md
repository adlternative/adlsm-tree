### lsm-tree vs b-tree family

b-tree 的数据写入和修改主要是通过随机写入的方式，而 lsm-tree 的数据写入通过批量缓冲追加写的方式。在 HDD 上，HDD 上 I/O 开销主要来自于磁头的寻道开销，而顺序读写相比顺序读写可以减少磁头的寻道开销，因此 lsm-tree 的写入性能强于 b-tree 族；而在 SSD 上，垃圾回收的需求会影响 SSD 的性能，当随机数据被写入时，新数据替换随机分布在其他块中的旧数据，这会产生很多的无效磁盘页面碎片分散在仍然包含有效数据的页面中，在这些块的垃圾收集期间，必须将所有有效数据移动（即读取和重写）到不同的块。而当顺序写入的数据被替换时，整个块通常是无效的，因此不需要移动数据（GC 开销更小）。所以在 SSD 上 lsm-tree 写性能仍然优于 b-tree 族。
